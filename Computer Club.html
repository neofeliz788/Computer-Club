<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Компьютерный клуб - Система управления</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 600;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-role {
            background-color: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .logout-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .logout-btn:hover {
            background-color: #c0392b;
        }
        
        .main-content {
            display: flex;
            gap: 20px;
        }
        
        .sidebar {
            width: 250px;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            height: fit-content;
        }
        
        .nav-menu {
            list-style: none;
        }
        
        .nav-item {
            margin-bottom: 10px;
        }
        
        .nav-link {
            display: block;
            padding: 12px 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: #e9ecef;
            border-left-color: #3498db;
        }
        
        .content-area {
            flex: 1;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            color: #2c3e50;
        }
        
        .computers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .computer-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.3s;
            border: 2px solid transparent;
        }
        
        .computer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .computer-card.free {
            border-color: #2ecc71;
        }
        
        .computer-card.busy {
            border-color: #e74c3c;
        }
        
        .computer-card.reserved {
            border-color: #f39c12;
        }
        
        .computer-name {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .computer-status {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .status-free {
            background-color: #d5f4e6;
            color: #27ae60;
        }
        
        .status-busy {
            background-color: #fadbd8;
            color: #c0392b;
        }
        
        .status-reserved {
            background-color: #fef5e7;
            color: #f39c12;
        }
        
        .computer-info {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        
        .action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
            width: 100%;
        }
        
        .reserve-btn {
            background-color: #3498db;
            color: white;
        }
        
        .reserve-btn:hover {
            background-color: #2980b9;
        }
        
        .free-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .free-btn:hover {
            background-color: #27ae60;
        }
        
        .admin-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .admin-btn:hover {
            background-color: #8e44ad;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stat-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin: 10px 0;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }
        
        .login-btn {
            background-color: #3498db;
            color: white;
            padding: 12px;
            width: 100%;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .login-btn:hover {
            background-color: #2980b9;
        }
        
        .hidden {
            display: none;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom-color: #3498db;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .report-table th, .report-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .report-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #2ecc71;
            color: white;
            padding: 15px 20px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Экран входа -->
    <div id="loginScreen" class="login-container">
        <h2 class="login-title">Вход в систему</h2>
        <div class="form-group">
            <label for="loginRole">Роль пользователя</label>
            <select id="loginRole">
                <option value="admin">Администратор</option>
                <option value="client">Клиент</option>
            </select>
        </div>
        <div class="form-group">
            <label for="username">Имя пользователя</label>
            <input type="text" id="username" placeholder="Введите имя пользователя">
        </div>
        <div class="form-group">
            <label for="password">Пароль</label>
            <input type="password" id="password" placeholder="Введите пароль">
        </div>
        <button id="loginButton" class="login-btn">Войти в систему</button>
    </div>
    
    <!-- Основной интерфейс системы -->
    <div id="mainInterface" class="hidden">
        <header>
            <div class="container">
                <div class="header-content">
                    <h1>Компьютерный клуб - Система управления</h1>
                    <div class="user-info">
                        <div class="user-role" id="currentUserRole">Администратор</div>
                        <div id="currentUserName">Иван Петров</div>
                        <button id="logoutButton" class="logout-btn">Выйти</button>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="container">
            <div class="main-content">
                <nav class="sidebar">
                    <ul class="nav-menu">
                        <li class="nav-item"><a href="#" data-section="computers" class="nav-link active">Компьютеры</a></li>
                        <li class="nav-item"><a href="#" data-section="reservation" class="nav-link">Бронирование</a></li>
                        <li class="nav-item"><a href="#" data-section="reports" class="nav-link">Отчеты</a></li>
                        <li class="nav-item"><a href="#" data-section="tariffs" class="nav-link">Тарифы</a></li>
                        <li class="nav-item"><a href="#" data-section="admin" class="nav-link">Администрирование</a></li>
                    </ul>
                </nav>
                
                <div class="content-area">
                    <!-- Секция компьютеров -->
                    <div id="computersSection" class="tab-content active">
                        <h2 class="section-title">Состояние компьютеров</h2>
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="stat-value" id="freeComputersCount">12</div>
                                <div class="stat-label">Свободно</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="busyComputersCount">8</div>
                                <div class="stat-label">Занято</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="reservedComputersCount">5</div>
                                <div class="stat-label">Забронировано</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="totalComputersCount">25</div>
                                <div class="stat-label">Всего компьютеров</div>
                            </div>
                        </div>
                        
                        <h3 class="section-title" style="margin-top: 30px;">Список компьютеров</h3>
                        <div class="computers-grid" id="computersList">
                            <!-- Компьютеры будут добавлены через JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Секция бронирования -->
                    <div id="reservationSection" class="tab-content">
                        <h2 class="section-title">Бронирование компьютера</h2>
                        <div class="form-group">
                            <label for="clientName">Ваше имя</label>
                            <input type="text" id="clientName" placeholder="Введите ваше имя">
                        </div>
                        <div class="form-group">
                            <label for="clientPhone">Номер телефона</label>
                            <input type="text" id="clientPhone" placeholder="Введите номер телефона">
                        </div>
                        <div class="form-group">
                            <label for="reserveComputer">Выберите компьютер</label>
                            <select id="reserveComputer">
                                <option value="">-- Выберите компьютер --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="reserveHours">Количество часов</label>
                            <select id="reserveHours">
                                <option value="1">1 час</option>
                                <option value="2">2 часа</option>
                                <option value="3">3 часа</option>
                                <option value="4">4 часа</option>
                                <option value="5">5 часов</option>
                                <option value="6">6 часов</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="reserveDate">Дата бронирования</label>
                            <input type="date" id="reserveDate">
                        </div>
                        <div class="form-group">
                            <label for="reserveTime">Время начала</label>
                            <input type="time" id="reserveTime">
                        </div>
                        <button id="makeReservationBtn" class="action-btn reserve-btn">Забронировать</button>
                        
                        <h3 class="section-title" style="margin-top: 40px;">Активные бронирования</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Компьютер</th>
                                    <th>Клиент</th>
                                    <th>Дата/Время</th>
                                    <th>Длительность</th>
                                    <th>Стоимость</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody id="reservationsTable">
                                <!-- Бронирования будут добавлены через JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Секция отчетов -->
                    <div id="reportsSection" class="tab-content">
                        <h2 class="section-title">Отчеты</h2>
                        <div class="tabs">
                            <div class="tab active" data-report="daily">Ежедневный</div>
                            <div class="tab" data-report="monthly">Ежемесячный</div>
                            <div class="tab" data-report="computers">По компьютерам</div>
                        </div>
                        
                        <div id="dailyReport" class="tab-content active">
                            <h3>Ежедневный отчет за <span id="reportDate">15.10.2023</span></h3>
                            <div class="stats-container">
                                <div class="stat-card">
                                    <div class="stat-value" id="dailyRevenue">12 450 ₽</div>
                                    <div class="stat-label">Выручка за день</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="dailyClients">24</div>
                                    <div class="stat-label">Клиентов за день</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="avgSession">2.5 ч</div>
                                    <div class="stat-label">Средняя сессия</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="busyHours">18 ч</div>
                                    <div class="stat-label">Часов работы</div>
                                </div>
                            </div>
                            
                            <h3 class="section-title" style="margin-top: 30px;">Детализация по сессиям</h3>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th>Время начала</th>
                                        <th>Клиент</th>
                                        <th>Компьютер</th>
                                        <th>Длительность</th>
                                        <th>Стоимость</th>
                                    </tr>
                                </thead>
                                <tbody id="dailySessionsTable">
                                    <!-- Сессии будут добавлены через JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="monthlyReport" class="tab-content">
                            <h3>Ежемесячный отчет за <span id="reportMonth">Октябрь 2023</span></h3>
                            <div class="stats-container">
                                <div class="stat-card">
                                    <div class="stat-value" id="monthlyRevenue">245 800 ₽</div>
                                    <div class="stat-label">Выручка за месяц</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="monthlyClients">520</div>
                                    <div class="stat-label">Клиентов за месяц</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="avgDailyRevenue">7 928 ₽</div>
                                    <div class="stat-label">Средняя выручка в день</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="bestDay">12 450 ₽</div>
                                    <div class="stat-label">Лучший день</div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="computersReport" class="tab-content">
                            <h3>Отчет по загрузке компьютеров</h3>
                            <table class="report-table">
                                <thead>
                                    <tr>
                                        <th>Компьютер</th>
                                        <th>Всего часов работы</th>
                                        <th>Доход</th>
                                        <th>Загрузка</th>
                                    </tr>
                                </thead>
                                <tbody id="computersReportTable">
                                    <!-- Данные по компьютерам будут добавлены через JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Секция тарифов -->
                    <div id="tariffsSection" class="tab-content">
                        <h2 class="section-title">Управление тарифами</h2>
                        <div class="form-group">
                            <label for="tariffName">Название тарифа</label>
                            <input type="text" id="tariffName" placeholder="Например: Стандартный">
                        </div>
                        <div class="form-group">
                            <label for="tariffType">Тип тарифа</label>
                            <select id="tariffType">
                                <option value="hourly">Почасовой</option>
                                <option value="package">Пакетный</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tariffPrice">Стоимость (руб/час или руб/пакет)</label>
                            <input type="number" id="tariffPrice" placeholder="Например: 150">
                        </div>
                        <div class="form-group">
                            <label for="tariffHours">Количество часов в пакете (только для пакетного)</label>
                            <input type="number" id="tariffHours" placeholder="Например: 10" disabled>
                        </div>
                        <button id="addTariffBtn" class="action-btn admin-btn">Добавить тариф</button>
                        
                        <h3 class="section-title" style="margin-top: 40px;">Активные тарифы</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Название</th>
                                    <th>Тип</th>
                                    <th>Стоимость</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody id="tariffsTable">
                                <!-- Тарифы будут добавлены через JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Секция администрирования -->
                    <div id="adminSection" class="tab-content">
                        <h2 class="section-title">Администрирование компьютеров</h2>
                        <div class="form-group">
                            <label for="computerName">Название компьютера</label>
                            <input type="text" id="computerName" placeholder="Например: PC-01">
                        </div>
                        <div class="form-group">
                            <label for="computerSpecs">Характеристики</label>
                            <textarea id="computerSpecs" rows="3" placeholder="Процессор, видеокарта, ОЗУ и т.д."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="computerTariff">Тариф</label>
                            <select id="computerTariff">
                                <option value="1">Стандартный (150 руб/час)</option>
                                <option value="2">Премиум (250 руб/час)</option>
                                <option value="3">Игровой (350 руб/час)</option>
                            </select>
                        </div>
                        <button id="addComputerBtn" class="action-btn admin-btn">Добавить компьютер</button>
                        
                        <h3 class="section-title" style="margin-top: 40px;">Список компьютеров для управления</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Название</th>
                                    <th>Характеристики</th>
                                    <th>Тариф</th>
                                    <th>Статус</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody id="adminComputersTable">
                                <!-- Компьютеры для администрирования будут добавлены через JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="notification" class="notification">
            <span id="notificationText">Действие выполнено успешно!</span>
        </div>
    </div>

    <script>
        // Данные системы
        let currentUser = null;
        let currentUserRole = 'admin'; // admin или client
        let computers = [];
        let reservations = [];
        let tariffs = [
            { id: 1, name: 'Стандартный', type: 'hourly', price: 150 },
            { id: 2, name: 'Премиум', type: 'hourly', price: 250 },
            { id: 3, name: 'Игровой', type: 'hourly', price: 350 },
            { id: 4, name: 'Ночной пакет', type: 'package', price: 800, hours: 6 }
        ];
        
        // Инициализация данных
        function initializeData() {
            // Создаем начальные данные о компьютерах
            computers = [
                { id: 1, name: 'PC-01', specs: 'Intel i5, RTX 3060, 16GB RAM', status: 'free', tariffId: 1 },
                { id: 2, name: 'PC-02', specs: 'Intel i7, RTX 3070, 32GB RAM', status: 'busy', tariffId: 2 },
                { id: 3, name: 'PC-03', specs: 'Intel i5, RTX 3060, 16GB RAM', status: 'free', tariffId: 1 },
                { id: 4, name: 'PC-04', specs: 'AMD Ryzen 5, RTX 3050, 16GB RAM', status: 'reserved', tariffId: 1 },
                { id: 5, name: 'PC-05', specs: 'Intel i9, RTX 4090, 64GB RAM', status: 'free', tariffId: 3 },
                { id: 6, name: 'PC-06', specs: 'Intel i7, RTX 3070, 32GB RAM', status: 'busy', tariffId: 2 },
                { id: 7, name: 'PC-07', specs: 'Intel i5, RTX 3060, 16GB RAM', status: 'free', tariffId: 1 },
                { id: 8, name: 'PC-08', specs: 'AMD Ryzen 7, RTX 4070, 32GB RAM', status: 'busy', tariffId: 2 }
            ];
            
            // Создаем начальные данные о бронированиях
            reservations = [
                { id: 1, computerId: 4, clientName: 'Алексей Иванов', clientPhone: '+7 912 345-67-89', 
                  date: '2023-10-15', time: '18:00', hours: 3, cost: 450, status: 'active' },
                { id: 2, computerId: 2, clientName: 'Мария Петрова', clientPhone: '+7 923 456-78-90', 
                  date: '2023-10-15', time: '16:00', hours: 2, cost: 500, status: 'active' }
            ];
            
            updateComputersList();
            updateReservationsTable();
            updateTariffsTable();
            updateAdminComputersTable();
            updateReportData();
            updateComputersReport();
        }
        
        // Обновление списка компьютеров
        function updateComputersList() {
            const computersList = document.getElementById('computersList');
            computersList.innerHTML = '';
            
            let freeCount = 0, busyCount = 0, reservedCount = 0;
            
            computers.forEach(computer => {
                // Подсчет статистики
                if (computer.status === 'free') freeCount++;
                else if (computer.status === 'busy') busyCount++;
                else if (computer.status === 'reserved') reservedCount++;
                
                // Создание карточки компьютера
                const computerCard = document.createElement('div');
                computerCard.className = `computer-card ${computer.status}`;
                
                const statusText = computer.status === 'free' ? 'Свободен' : 
                                 computer.status === 'busy' ? 'Занят' : 'Забронирован';
                const statusClass = computer.status === 'free' ? 'status-free' : 
                                  computer.status === 'busy' ? 'status-busy' : 'status-reserved';
                
                // Получение тарифа для компьютера
                const tariff = tariffs.find(t => t.id === computer.tariffId);
                const tariffPrice = tariff ? tariff.price : 0;
                
                computerCard.innerHTML = `
                    <div class="computer-name">${computer.name}</div>
                    <div class="computer-status ${statusClass}">${statusText}</div>
                    <div class="computer-info">${computer.specs}</div>
                    <div class="computer-info">Тариф: ${tariff ? tariff.name : 'Не указан'} (${tariffPrice} руб/час)</div>
                    ${currentUserRole === 'client' && computer.status === 'free' ? 
                      `<button class="action-btn reserve-btn" onclick="reserveComputer(${computer.id})">Забронировать</button>` : ''}
                    ${currentUserRole === 'admin' ? 
                      `<button class="action-btn free-btn" onclick="changeComputerStatus(${computer.id}, 'free')">Освободить</button>` : ''}
                `;
                
                computersList.appendChild(computerCard);
            });
            
            // Обновление счетчиков
            document.getElementById('freeComputersCount').textContent = freeCount;
            document.getElementById('busyComputersCount').textContent = busyCount;
            document.getElementById('reservedComputersCount').textContent = reservedCount;
            document.getElementById('totalComputersCount').textContent = computers.length;
            
            // Обновление выпадающего списка для бронирования
            updateReservationComputerSelect();
        }
        
        // Обновление выпадающего списка компьютеров для бронирования
        function updateReservationComputerSelect() {
            const select = document.getElementById('reserveComputer');
            select.innerHTML = '<option value="">-- Выберите компьютер --</option>';
            
            computers.forEach(computer => {
                if (computer.status === 'free') {
                    const option = document.createElement('option');
                    option.value = computer.id;
                    option.textContent = `${computer.name} (${computer.specs})`;
                    select.appendChild(option);
                }
            });
        }
        
        // Обновление таблицы бронирований
        function updateReservationsTable() {
            const tableBody = document.getElementById('reservationsTable');
            tableBody.innerHTML = '';
            
            reservations.forEach(reservation => {
                const computer = computers.find(c => c.id === reservation.computerId);
                const computerName = computer ? computer.name : 'Неизвестно';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${computerName}</td>
                    <td>${reservation.clientName}<br><small>${reservation.clientPhone}</small></td>
                    <td>${reservation.date} ${reservation.time}</td>
                    <td>${reservation.hours} ч</td>
                    <td>${reservation.cost} руб</td>
                    <td>
                        ${currentUserRole === 'admin' ? 
                          `<button class="action-btn free-btn" onclick="completeReservation(${reservation.id})">Завершить</button>` : 
                          `<button class="action-btn" onclick="cancelReservation(${reservation.id})" style="background-color: #e74c3c; color: white;">Отменить</button>`}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Обновление таблицы тарифов
        function updateTariffsTable() {
            const tableBody = document.getElementById('tariffsTable');
            tableBody.innerHTML = '';
            
            tariffs.forEach(tariff => {
                const typeText = tariff.type === 'hourly' ? 'Почасовой' : 'Пакетный';
                const priceText = tariff.type === 'hourly' ? `${tariff.price} руб/час` : `${tariff.price} руб за ${tariff.hours} часов`;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${tariff.name}</td>
                    <td>${typeText}</td>
                    <td>${priceText}</td>
                    <td>
                        <button class="action-btn" onclick="editTariff(${tariff.id})" style="background-color: #f39c12; color: white; margin-right: 5px;">Изменить</button>
                        <button class="action-btn" onclick="deleteTariff(${tariff.id})" style="background-color: #e74c3c; color: white;">Удалить</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Обновление таблицы компьютеров для администрирования
        function updateAdminComputersTable() {
            const tableBody = document.getElementById('adminComputersTable');
            tableBody.innerHTML = '';
            
            computers.forEach(computer => {
                const tariff = tariffs.find(t => t.id === computer.tariffId);
                const tariffName = tariff ? tariff.name : 'Не указан';
                const statusText = computer.status === 'free' ? 'Свободен' : 
                                 computer.status === 'busy' ? 'Занят' : 'Забронирован';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${computer.name}</td>
                    <td>${computer.specs}</td>
                    <td>${tariffName}</td>
                    <td>${statusText}</td>
                    <td>
                        <button class="action-btn" onclick="editComputer(${computer.id})" style="background-color: #f39c12; color: white; margin-right: 5px;">Изменить</button>
                        <button class="action-btn" onclick="deleteComputer(${computer.id})" style="background-color: #e74c3c; color: white;">Удалить</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Обновление данных отчетов
        function updateReportData() {
            // Обновление ежедневного отчета
            const dailySessionsTable = document.getElementById('dailySessionsTable');
            dailySessionsTable.innerHTML = '';
            
            // Добавляем примеры сессий
            const sessions = [
                { time: '10:00', client: 'Алексей Иванов', computer: 'PC-02', duration: '2 ч', cost: '500 руб' },
                { time: '12:30', client: 'Мария Петрова', computer: 'PC-04', duration: '3 ч', cost: '450 руб' },
                { time: '14:00', client: 'Иван Сидоров', computer: 'PC-01', duration: '1.5 ч', cost: '225 руб' },
                { time: '16:00', client: 'Ольга Николаева', computer: 'PC-05', duration: '4 ч', cost: '1400 руб' },
                { time: '18:00', client: 'Дмитрий Козлов', computer: 'PC-07', duration: '2 ч', cost: '300 руб' }
            ];
            
            sessions.forEach(session => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${session.time}</td>
                    <td>${session.client}</td>
                    <td>${session.computer}</td>
                    <td>${session.duration}</td>
                    <td>${session.cost}</td>
                `;
                dailySessionsTable.appendChild(row);
            });
        }
        
        // Обновление отчета по компьютерам
        function updateComputersReport() {
            const tableBody = document.getElementById('computersReportTable');
            tableBody.innerHTML = '';
            
            // Пример данных для отчета
            const computerStats = [
                { name: 'PC-01', hours: 156, revenue: '23 400 руб', load: '65%' },
                { name: 'PC-02', hours: 210, revenue: '52 500 руб', load: '88%' },
                { name: 'PC-03', hours: 120, revenue: '18 000 руб', load: '50%' },
                { name: 'PC-04', hours: 185, revenue: '27 750 руб', load: '77%' },
                { name: 'PC-05', hours: 95, revenue: '33 250 руб', load: '40%' },
                { name: 'PC-06', hours: 175, revenue: '43 750 руб', load: '73%' }
            ];
            
            computerStats.forEach(stat => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${stat.name}</td>
                    <td>${stat.hours} ч</td>
                    <td>${stat.revenue}</td>
                    <td>${stat.load}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // Функции для работы с системой
        
        function login() {
            const role = document.getElementById('loginRole').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                showNotification('Введите имя пользователя и пароль', 'error');
                return;
            }
            
            currentUserRole = role;
            currentUser = username;
            
            // Скрываем экран входа и показываем основной интерфейс
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainInterface').classList.remove('hidden');
            
            // Обновляем информацию о пользователе
            document.getElementById('currentUserName').textContent = username;
            document.getElementById('currentUserRole').textContent = role === 'admin' ? 'Администратор' : 'Клиент';
            
            // Настраиваем интерфейс в зависимости от роли
            setupInterfaceForRole();
            
            showNotification(`Добро пожаловать, ${username}!`, 'success');
        }
        
        function setupInterfaceForRole() {
            const adminSections = ['reports', 'tariffs', 'admin'];
            const clientSections = ['reservation'];
            
            // Скрываем/показываем элементы в зависимости от роли
            document.querySelectorAll('.nav-item').forEach(item => {
                const section = item.querySelector('.nav-link').dataset.section;
                
                if (currentUserRole === 'admin') {
                    item.style.display = 'block';
                } else if (currentUserRole === 'client') {
                    if (adminSections.includes(section)) {
                        item.style.display = 'none';
                    } else {
                        item.style.display = 'block';
                    }
                }
            });
            
            // Активируем первую доступную секцию
            if (currentUserRole === 'client') {
                document.querySelector(`[data-section="computers"]`).click();
            }
        }
        
        function logout() {
            currentUser = null;
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainInterface').classList.add('hidden');
            
            // Сбрасываем поля входа
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }
        
        function changeComputerStatus(computerId, status) {
            const computer = computers.find(c => c.id === computerId);
            if (computer) {
                computer.status = status;
                updateComputersList();
                updateAdminComputersTable();
                showNotification(`Статус компьютера ${computer.name} изменен`, 'success');
            }
        }
        
        function reserveComputer(computerId) {
            if (currentUserRole !== 'client') {
                showNotification('Только клиенты могут бронировать компьютеры', 'error');
                return;
            }
            
            // Переключаемся на вкладку бронирования
            document.querySelector(`[data-section="reservation"]`).click();
            
            // Устанавливаем выбранный компьютер
            document.getElementById('reserveComputer').value = computerId;
            
            showNotification('Выберите параметры бронирования в форме ниже', 'info');
        }
        
        function makeReservation() {
            if (currentUserRole !== 'client') {
                showNotification('Только клиенты могут бронировать компьютеры', 'error');
                return;
            }
            
            const clientName = document.getElementById('clientName').value;
            const clientPhone = document.getElementById('clientPhone').value;
            const computerId = parseInt(document.getElementById('reserveComputer').value);
            const hours = parseInt(document.getElementById('reserveHours').value);
            const date = document.getElementById('reserveDate').value;
            const time = document.getElementById('reserveTime').value;
            
            if (!clientName || !clientPhone || !computerId || !hours || !date || !time) {
                showNotification('Заполните все поля формы', 'error');
                return;
            }
            
            const computer = computers.find(c => c.id === computerId);
            if (!computer) {
                showNotification('Компьютер не найден', 'error');
                return;
            }
            
            if (computer.status !== 'free') {
                showNotification('Этот компьютер уже занят или забронирован', 'error');
                return;
            }
            
            const tariff = tariffs.find(t => t.id === computer.tariffId);
            const cost = tariff ? tariff.price * hours : 150 * hours;
            
            // Создаем новое бронирование
            const newReservation = {
                id: reservations.length + 1,
                computerId,
                clientName,
                clientPhone,
                date,
                time,
                hours,
                cost,
                status: 'active'
            };
            
            reservations.push(newReservation);
            
            // Меняем статус компьютера
            computer.status = 'reserved';
            
            // Обновляем интерфейс
            updateComputersList();
            updateReservationsTable();
            updateAdminComputersTable();
            
            // Очищаем форму
            document.getElementById('clientName').value = '';
            document.getElementById('clientPhone').value = '';
            document.getElementById('reserveDate').value = '';
            document.getElementById('reserveTime').value = '';
            
            showNotification(`Компьютер ${computer.name} успешно забронирован на ${hours} часов. Стоимость: ${cost} руб`, 'success');
        }
        
        function completeReservation(reservationId) {
            if (currentUserRole !== 'admin') {
                showNotification('Только администратор может завершать бронирования', 'error');
                return;
            }
            
            const reservationIndex = reservations.findIndex(r => r.id === reservationId);
            if (reservationIndex === -1) return;
            
            const reservation = reservations[reservationIndex];
            const computer = computers.find(c => c.id === reservation.computerId);
            
            if (computer) {
                computer.status = 'free';
            }
            
            // Удаляем бронирование
            reservations.splice(reservationIndex, 1);
            
            // Обновляем интерфейс
            updateComputersList();
            updateReservationsTable();
            updateAdminComputersTable();
            
            showNotification(`Бронирование завершено. Компьютер ${computer ? computer.name : ''} освобожден`, 'success');
        }
        
        function cancelReservation(reservationId) {
            const reservationIndex = reservations.findIndex(r => r.id === reservationId);
            if (reservationIndex === -1) return;
            
            const reservation = reservations[reservationIndex];
            const computer = computers.find(c => c.id === reservation.computerId);
            
            if (computer) {
                computer.status = 'free';
            }
            
            // Удаляем бронирование
            reservations.splice(reservationIndex, 1);
            
            // Обновляем интерфейс
            updateComputersList();
            updateReservationsTable();
            updateAdminComputersTable();
            
            showNotification('Бронирование отменено', 'success');
        }
        
        function addTariff() {
            if (currentUserRole !== 'admin') {
                showNotification('Только администратор может добавлять тарифы', 'error');
                return;
            }
            
            const name = document.getElementById('tariffName').value;
            const type = document.getElementById('tariffType').value;
            const price = parseInt(document.getElementById('tariffPrice').value);
            const hours = type === 'package' ? parseInt(document.getElementById('tariffHours').value) : null;
            
            if (!name || !price) {
                showNotification('Заполните все обязательные поля', 'error');
                return;
            }
            
            if (type === 'package' && !hours) {
                showNotification('Для пакетного тарифа укажите количество часов', 'error');
                return;
            }
            
            const newTariff = {
                id: tariffs.length + 1,
                name,
                type,
                price,
                hours
            };
            
            tariffs.push(newTariff);
            updateTariffsTable();
            
            // Очищаем форму
            document.getElementById('tariffName').value = '';
            document.getElementById('tariffPrice').value = '';
            document.getElementById('tariffHours').value = '';
            
            showNotification(`Тариф "${name}" успешно добавлен`, 'success');
        }
        
        function editTariff(tariffId) {
            // В реальной системе здесь была бы форма редактирования
            showNotification('Редактирование тарифа (в демо-версии не реализовано)', 'info');
        }
        
        function deleteTariff(tariffId) {
            if (currentUserRole !== 'admin') {
                showNotification('Только администратор может удалять тарифы', 'error');
                return;
            }
            
            const tariffIndex = tariffs.findIndex(t => t.id === tariffId);
            if (tariffIndex === -1) return;
            
            const tariffName = tariffs[tariffIndex].name;
            tariffs.splice(tariffIndex, 1);
            
            updateTariffsTable();
            showNotification(`Тариф "${tariffName}" удален`, 'success');
        }
        
        function addComputer() {
            if (currentUserRole !== 'admin') {
                showNotification('Только администратор может добавлять компьютеры', 'error');
                return;
            }
            
            const name = document.getElementById('computerName').value;
            const specs = document.getElementById('computerSpecs').value;
            const tariffId = parseInt(document.getElementById('computerTariff').value);
            
            if (!name || !specs) {
                showNotification('Заполните все обязательные поля', 'error');
                return;
            }
            
            const newComputer = {
                id: computers.length + 1,
                name,
                specs,
                status: 'free',
                tariffId
            };
            
            computers.push(newComputer);
            updateComputersList();
            updateAdminComputersTable();
            updateReservationComputerSelect();
            
            // Очищаем форму
            document.getElementById('computerName').value = '';
            document.getElementById('computerSpecs').value = '';
            
            showNotification(`Компьютер "${name}" успешно добавлен`, 'success');
        }
        
        function editComputer(computerId) {
            // В реальной системе здесь была бы форма редактирования
            showNotification('Редактирование компьютера (в демо-версии не реализовано)', 'info');
        }
        
        function deleteComputer(computerId) {
            if (currentUserRole !== 'admin') {
                showNotification('Только администратор может удалять компьютеры', 'error');
                return;
            }
            
            const computerIndex = computers.findIndex(c => c.id === computerId);
            if (computerIndex === -1) return;
            
            const computerName = computers[computerIndex].name;
            computers.splice(computerIndex, 1);
            
            updateComputersList();
            updateAdminComputersTable();
            updateReservationComputerSelect();
            
            showNotification(`Компьютер "${computerName}" удален`, 'success');
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            
            // Устанавливаем цвет в зависимости от типа уведомления
            if (type === 'success') {
                notification.style.backgroundColor = '#2ecc71';
            } else if (type === 'error') {
                notification.style.backgroundColor = '#e74c3c';
            } else if (type === 'info') {
                notification.style.backgroundColor = '#3498db';
            }
            
            notification.style.display = 'block';
            
            // Скрываем уведомление через 3 секунды
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
            
            // Устанавливаем текущую дату в поле бронирования
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('reserveDate').value = today;
            document.getElementById('reserveDate').min = today;
            
            // Устанавливаем текущее время + 1 час
            const now = new Date();
            now.setHours(now.getHours() + 1);
            const timeString = now.toTimeString().substring(0, 5);
            document.getElementById('reserveTime').value = timeString;
            
            // Обработчики событий
            document.getElementById('loginButton').addEventListener('click', login);
            document.getElementById('logoutButton').addEventListener('click', logout);
            document.getElementById('makeReservationBtn').addEventListener('click', makeReservation);
            document.getElementById('addTariffBtn').addEventListener('click', addTariff);
            document.getElementById('addComputerBtn').addEventListener('click', addComputer);
            
            // Обработка выбора типа тарифа
            document.getElementById('tariffType').addEventListener('change', function() {
                const hoursInput = document.getElementById('tariffHours');
                hoursInput.disabled = this.value !== 'package';
            });
            
            // Навигация по меню
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Убираем активный класс у всех ссылок
                    document.querySelectorAll('.nav-link').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Добавляем активный класс текущей ссылке
                    this.classList.add('active');
                    
                    // Скрываем все секции
                    document.querySelectorAll('.tab-content').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Показываем выбранную секцию
                    const sectionId = this.dataset.section + 'Section';
                    document.getElementById(sectionId).classList.add('active');
                });
            });
            
            // Переключение вкладок отчетов
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Убираем активный класс у всех вкладок
                    document.querySelectorAll('.tab').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Добавляем активный класс текущей вкладке
                    this.classList.add('active');
                    
                    // Скрываем все отчеты
                    document.querySelectorAll('#reportsSection .tab-content').forEach(report => {
                        report.classList.remove('active');
                    });
                    
                    // Показываем выбранный отчет
                    const reportId = this.dataset.report + 'Report';
                    document.getElementById(reportId).classList.add('active');
                });
            });
            
            // Обработка нажатия Enter в полях входа
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    login();
                }
            });
        });
    </script>
</body>
</html>